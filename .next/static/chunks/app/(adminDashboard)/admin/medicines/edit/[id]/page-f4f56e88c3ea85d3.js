(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9088],{2124:(e,r,a)=>{"use strict";a.d(r,{default:()=>z});var t=a(5155),n=a(3415),s=a(9606),i=a(5060),l=a(2115),c=a(6046),o=a(814),d=a(1621),u=a(4870),m=a(3900),p=a(6754),x=a(7528),h=a(9095),f=a(3312),g=a(6510),j=a(2423),y=a(5185),b=a(5828);let v=(0,b.createServerReference)("7f583b84edb8a3c682c5e7366a853f9ca6f4548246",b.callServer,void 0,b.findSourceMapURL,"getMedicineById"),S=(0,b.createServerReference)("7f864f69088bf6a3c0327669d49be1c85017fab721",b.callServer,void 0,b.findSourceMapURL,"updateMedicine"),N=n.z.object({name:n.z.string().min(2,"Medicine name must be at least 2 characters"),price:n.z.coerce.number().positive("Price must be positive"),quantity:n.z.coerce.number().int().positive("Quantity must be positive integer"),type:n.z.string().min(2,"Type is required"),usege:n.z.string().optional(),sideEffect:n.z.string().optional(),precautions:n.z.string().optional(),description:n.z.string().min(10,"Description must be at least 10 characters"),category:n.z.string().min(1,"Category is required"),prescription:n.z.enum(["Yes","No"]),expiryDate:n.z.date(),manufacturer:n.z.string().min(1,"Manufacturer is required")});function z(e){let{categories:r,manufacturers:a}=e,[n,b]=(0,l.useState)([]),z=(0,c.useRouter)(),{id:C}=(0,c.useParams)(),M=(0,s.mN)({resolver:(0,i.u)(N),defaultValues:{name:"",price:0,quantity:0,type:"",usege:"",sideEffect:"",precautions:"",description:"",category:"",prescription:"No",expiryDate:new Date,manufacturer:""}});(0,l.useEffect)(()=>{!async function(){try{let e=await v(C);if((null==e?void 0:e.success)&&(null==e?void 0:e.data)){let r=e.data;M.reset({name:r.name,price:r.price,quantity:r.quantity,type:r.type,usege:r.usege||"",sideEffect:r.sideEffect||"",precautions:r.precautions||"",description:r.description,category:r.category.name,prescription:r.prescription,expiryDate:new Date(r.expiryDate),manufacturer:r.manufacturer.name}),b(r.images||[])}else o.o.error("Failed to fetch medicine details!")}catch(e){o.o.error("Error loading medicine data")}}()},[C,M]);let E=async e=>{try{let r={...e,images:n},a=await S(C,r);a.success?(o.o.success("Medicine updated successfully!"),z.push("/admin/medicines")):o.o.error(a.message||"Update failed")}catch(e){o.o.error("Failed to update medicine. Try again!")}},w="border border-gray-400 dark:border-gray-700 bg-transparent rounded-lg p-3 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition duration-300";return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto p-4 bg-white dark:bg-zinc-900 shadow-xl rounded-xl",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-center text-primary mb-6",children:"Edit Medicine"}),(0,t.jsx)(u.lV,{...M,children:(0,t.jsxs)("form",{onSubmit:M.handleSubmit(E),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[{name:"name",label:"Medicine Name"},{name:"price",label:"Price",type:"number"},{name:"quantity",label:"Quantity",type:"number"},{name:"type",label:"Medicine Type"}].map(e=>{let{name:r,label:a,type:n}=e;return(0,t.jsx)(u.zB,{control:M.control,name:r,render:e=>{let{field:r}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:a}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(m.p,{type:n||"text",placeholder:"Enter ".concat(a),className:w,...r,value:"boolean"==typeof r.value||r.value instanceof Date?"":r.value})}),(0,t.jsx)(u.C5,{className:"text-red-500"})]})}},r)}),(0,t.jsx)(u.zB,{control:M.control,name:"expiryDate",render:e=>{let{field:r}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Expiry Date"}),(0,t.jsxs)(h.AM,{children:[(0,t.jsx)(h.Wv,{asChild:!0,children:(0,t.jsx)(u.MJ,{children:(0,t.jsxs)(f.$,{variant:"outline",className:"w-full border border-gray-300 dark:border-gray-600",children:[r.value?(0,d.GP)(r.value,"PPP"):"Pick a date",(0,t.jsx)(j.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,t.jsx)(h.hl,{className:"w-auto p-0",children:(0,t.jsx)(g.V,{mode:"single",selected:r.value,onSelect:r.onChange,disabled:e=>e<new Date||e>new Date("2100-01-01")})})]}),(0,t.jsx)(u.C5,{})]})}}),[{name:"usege",label:"Usage Instructions"},{name:"sideEffect",label:"Side Effects"},{name:"precautions",label:"Precautions"},{name:"description",label:"Description"}].map(e=>{let{name:r,label:a}=e;return(0,t.jsx)(u.zB,{control:M.control,name:r,render:e=>{let{field:r}=e;return(0,t.jsxs)(u.eI,{className:"col-span-1 md:col-span-2",children:[(0,t.jsx)(u.lR,{children:a}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(p.T,{placeholder:"Enter ".concat(a),className:w,...r,value:"boolean"==typeof r.value||r.value instanceof Date?"":r.value})}),(0,t.jsx)(u.C5,{className:"text-red-500"})]})}},r)}),[{name:"category",options:r},{name:"manufacturer",options:a}].map(e=>{let{name:r,options:a}=e;return(0,t.jsx)(u.zB,{control:M.control,name:r,render:e=>{var n;let{field:s}=e;return console.log("field asdfa",s),(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:r}),(0,t.jsxs)(x.Select,{onValueChange:s.onChange,defaultValue:null===(n=s.value)||void 0===n?void 0:n.toString(),children:[(0,t.jsx)(x.SelectTrigger,{className:w,children:(0,t.jsx)(x.SelectValue,{placeholder:"Select ".concat(r)})}),(0,t.jsx)(x.SelectContent,{children:null==a?void 0:a.map(e=>(0,t.jsx)(x.SelectItem,{value:e._id,children:e.name},e._id))})]}),(0,t.jsx)(u.C5,{})]})}},r)}),(0,t.jsx)(u.zB,{control:M.control,name:"prescription",render:e=>{let{field:r}=e;return(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Prescription Required"}),(0,t.jsxs)(x.Select,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(x.SelectTrigger,{className:w,children:(0,t.jsx)(x.SelectValue,{placeholder:"Select"})})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"Yes",children:"Yes"}),(0,t.jsx)(x.SelectItem,{value:"No",children:"No"})]})]}),(0,t.jsx)(u.C5,{className:"text-red-500"})]})}}),(0,t.jsx)(y.A,{onUploadComplete:e=>b(e)}),(0,t.jsx)(f.$,{type:"submit",className:"col-span-2 cursor-pointer",children:"Update Medicine"})]})})]})}},8506:(e,r,a)=>{Promise.resolve().then(a.bind(a,2124))}},e=>{var r=r=>e(e.s=r);e.O(0,[1345,2377,7871,7970,7942,9246,3480,2081,7313,8441,6587,7358],()=>r(8506)),_N_E=e.O()}]);