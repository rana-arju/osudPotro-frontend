(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7236],{1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(3463),s=r(9795);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,n.$)(t))}},1985:(e,t,r)=>{Promise.resolve().then(r.bind(r,6133))},2508:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>o,Hj:()=>d,XI:()=>a,nA:()=>c,nd:()=>l});var n=r(5155);r(2115);var s=r(1567);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",t),...r})})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var n=r(5155);r(2115);var s=r(2317),a=r(1027),i=r(1567);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:a,asChild:d=!1,...l}=e,c=d?s.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:a,className:t})),...l})}},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var n=r(5155);r(2115);var s=r(1567);function a(e){let{className:t,type:r,...a}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}},5121:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var n=r(5155);r(2115);var s=r(2317),a=r(1027),i=r(1567);let o=(0,a.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,asChild:a=!1,...d}=e,l=a?s.DX:"span";return(0,n.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(o({variant:r}),t),...d})}},6133:(e,t,r)=>{"use strict";r.d(t,{default:()=>b});var n=r(5155),s=r(2115),a=r(3312),i=r(3900),o=r(2508),d=r(7485),l=r(5121),c=r(853);let u=(0,r(7401).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var v=r(814),m=r(5828);let f=(0,m.createServerReference)("7f72e2b16b4890bec3e4cbf2569573dce4090abed6",m.callServer,void 0,m.findSourceMapURL,"updateRole"),p=(0,m.createServerReference)("7fc95ce47dc4f0b9ee2aef64cb82f9b8d994772b4b",m.callServer,void 0,m.findSourceMapURL,"updateStatus"),x=(0,m.createServerReference)("7f118a3308c5c5219ecec735150b4632c7ca935582",m.callServer,void 0,m.findSourceMapURL,"deleteUser");var g=r(6046);function b(e){let{users:t}=e,[r,m]=(0,s.useState)(""),b=(0,g.useRouter)(),h=async(e,t)=>{console.log("newrole",e);try{let r=await f(e,t);(null==r?void 0:r.success)?v.o.success(null==r?void 0:r.message):v.o.error(null==r?void 0:r.message)}catch(e){v.o.error("Failed to update user role")}},y=async(e,t)=>{console.log("user status",t);try{let r=await p(e,t);(null==r?void 0:r.success)?v.o.success(null==r?void 0:r.message):v.o.error(null==r?void 0:r.message)}catch(e){v.o.error("Failed to update user status")}},j=async e=>{try{let t=await x(e);(null==t?void 0:t.success)?v.o.success(null==t?void 0:t.message):v.o.error(null==t?void 0:t.message)}catch(e){v.o.error("Failed to delete user")}};return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Manage Users"}),(0,n.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,n.jsx)(i.p,{type:"text",placeholder:"Search users...",value:r,onChange:e=>m(e.target.value),className:"max-w-sm mr-2"}),(0,n.jsx)(c.A,{className:"text-gray-400"})]}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(o.XI,{children:[(0,n.jsx)(o.A0,{children:(0,n.jsxs)(o.Hj,{children:[(0,n.jsx)(o.nd,{children:"Name"}),(0,n.jsx)(o.nd,{children:"Email"}),(0,n.jsx)(o.nd,{children:"Role"}),(0,n.jsx)(o.nd,{children:"Status"}),(0,n.jsx)(o.nd,{children:"Orders"}),(0,n.jsx)(o.nd,{children:"Actions"})]})}),(0,n.jsx)(o.BF,{children:t.map(e=>(0,n.jsxs)(o.Hj,{children:[(0,n.jsx)(o.nA,{children:e.name}),(0,n.jsx)(o.nA,{children:e.email}),(0,n.jsx)(o.nA,{children:(0,n.jsx)(l.E,{variant:"admin"===e.role?"default":"secondary",children:e.role})}),(0,n.jsx)(o.nA,{children:(0,n.jsx)(l.E,{variant:"in-progress"===e.status?"default":"destructive",children:e.status})}),(0,n.jsx)(o.nA,{children:e.orderCount}),(0,n.jsx)(o.nA,{children:(0,n.jsxs)(d.rI,{children:[(0,n.jsx)(d.ty,{asChild:!0,children:(0,n.jsxs)(a.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,n.jsx)(u,{className:"h-4 w-4"})]})}),(0,n.jsxs)(d.SQ,{align:"end",children:[(0,n.jsx)(d.lp,{children:"Actions"}),(0,n.jsx)(d._2,{className:"cursor-pointer",onClick:()=>b.push("/admin/users/".concat(null==e?void 0:e._id)),children:"View Details"}),(0,n.jsx)(d.mB,{}),(0,n.jsxs)(d._2,{className:"cursor-pointer",onClick:()=>h(e._id,"admin"===e.role?"customer":"admin"),children:["Change Role to"," ","admin"===e.role?"Customer":"Admin"]}),(0,n.jsxs)(d._2,{className:"cursor-pointer",onClick:()=>y(e._id,"in-progress"===e.status?"blocked":"in-progress"),children:["Mark as"," ","in-progress"===e.status?"blocked":"In-Progress"]}),(0,n.jsx)(d._2,{className:"cursor-pointer",onClick:()=>j(e._id),children:(0,n.jsx)("p",{className:"text-red-500 hover:text-white font-bold capitalize",children:"Delete user"})})]})]})})]},e._id))})]})})]})}},7028:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var n=r(2115),s=r(8068),a=r(6611),i=e=>{let{present:t,children:r}=e,i=function(e){var t,r;let[s,i]=n.useState(),d=n.useRef({}),l=n.useRef(e),c=n.useRef("none"),[u,v]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return n.useEffect(()=>{let e=o(d.current);c.current="mounted"===u?e:"none"},[u]),(0,a.N)(()=>{let t=d.current,r=l.current;if(r!==e){let n=c.current,s=o(t);e?v("MOUNT"):"none"===s||(null==t?void 0:t.display)==="none"?v("UNMOUNT"):r&&n!==s?v("ANIMATION_OUT"):v("UNMOUNT"),l.current=e}},[e,v]),(0,a.N)(()=>{if(s){var e;let t;let r=null!==(e=s.ownerDocument.defaultView)&&void 0!==e?e:window,n=e=>{let n=o(d.current).includes(e.animationName);if(e.target===s&&n&&(v("ANIMATION_END"),!l.current)){let e=s.style.animationFillMode;s.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=e)})}},a=e=>{e.target===s&&(c.current=o(d.current))};return s.addEventListener("animationstart",a),s.addEventListener("animationcancel",n),s.addEventListener("animationend",n),()=>{r.clearTimeout(t),s.removeEventListener("animationstart",a),s.removeEventListener("animationcancel",n),s.removeEventListener("animationend",n)}}v("ANIMATION_END")},[s,v]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:n.useCallback(e=>{e&&(d.current=getComputedStyle(e)),i(e)},[])}}(t),d="function"==typeof r?r({present:i.isPresent}):n.Children.only(r),l=(0,s.s)(i.ref,function(e){var t,r;let n=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(s=(n=null===(r=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===r?void 0:r.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}(d));return"function"==typeof r||i.isPresent?n.cloneElement(d,{ref:l}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}i.displayName="Presence"},7485:(e,t,r)=>{"use strict";r.d(t,{SQ:()=>d,_2:()=>l,lp:()=>c,mB:()=>u,rI:()=>i,ty:()=>o});var n=r(5155);r(2115);var s=r(937),a=r(1567);function i(e){let{...t}=e;return(0,n.jsx)(s.bL,{"data-slot":"dropdown-menu",...t})}function o(e){let{...t}=e;return(0,n.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",...t})}function d(e){let{className:t,sideOffset:r=4,...i}=e;return(0,n.jsx)(s.ZL,{children:(0,n.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:r,className:(0,a.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",t),...i})})}function l(e){let{className:t,inset:r,variant:i="default",...o}=e;return(0,n.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":i,className:(0,a.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o})}function c(e){let{className:t,inset:r,...i}=e;return(0,n.jsx)(s.JU,{"data-slot":"dropdown-menu-label","data-inset":r,className:(0,a.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...i})}function u(e){let{className:t,...r}=e;return(0,n.jsx)(s.wv,{"data-slot":"dropdown-menu-separator",className:(0,a.cn)("bg-border -mx-1 my-1 h-px",t),...r})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1345,814,2937,9246,7627,8441,6587,7358],()=>t(1985)),_N_E=e.O()}]);