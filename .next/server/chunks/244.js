"use strict";exports.id=244,exports.ids=[244],exports.modules={51040:(e,t,a)=>{a.d(t,{hG:()=>f,CF:()=>g,HW:()=>p,jp:()=>x,qg:()=>b,FK:()=>v,Lx:()=>i,ri:()=>m,DY:()=>d,r7:()=>l,S0:()=>u,yB:()=>h});var r=a(88977);a(98063);class n extends Error{}n.prototype.name="InvalidTokenError";var s=a(61482),o=a(44512),c=a(56215);let d=async e=>{try{let t=await fetch("http://localhost:5000/api/v1/auth/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json(),r=await (0,o.UL)();return a.success&&(r.set("accessToken",a.data.accessToken),r.set("refreshToken",a.data.refreshToken)),(0,s.revalidateTag)("auth"),a}catch(e){return Error(e)}},i=async e=>{try{let t=await fetch("http://localhost:5000/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json(),r=await (0,o.UL)();return a.success&&(r.set("accessToken",a.data.accessToken),r.set("refreshToken",a.data.refreshToken)),(0,s.revalidateTag)("auth"),a}catch(e){return Error(e)}},l=async e=>{try{let t=await fetch("http://localhost:5000/api/v1/auth/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value},body:JSON.stringify(e)});return(0,s.revalidateTag)("auth"),t.json()}catch(e){return Error(e)}},f=async e=>{try{let t=await fetch(`http://localhost:5000/api/v1/auth/user/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value}});return(0,s.revalidateTag)("auth"),t.json()}catch(e){return Error(e)}},u=async(e,t)=>{console.log("servoce",t);try{let a=await fetch(`http://localhost:5000/api/v1/auth/role/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value},body:JSON.stringify({role:t})});return(0,s.revalidateTag)("auth"),a.json()}catch(e){return Error(e)}},h=async(e,t)=>{try{let a=await fetch(`http://localhost:5000/api/v1/auth/status/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value},body:JSON.stringify({status:t})});return(0,s.revalidateTag)("auth"),a.json()}catch(e){return Error(e)}},p=async()=>{let e=(await o.UL()).get("accessToken")?.value,t=null;return e?await function(e,t){let a;if("string"!=typeof e)throw new n("Invalid token specified: must be a string");t||(t={});let r=+(!0!==t.header),s=e.split(".")[r];if("string"!=typeof s)throw new n(`Invalid token specified: missing part #${r+1}`);try{a=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var a;return a=t,decodeURIComponent(atob(a).replace(/(.)/g,(e,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}catch(e){return atob(t)}}(s)}catch(e){throw new n(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(a)}catch(e){throw new n(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}(e):null},m=async()=>{(await (0,o.UL)()).delete("accessToken")},b=async()=>{try{let e=await fetch("http://localhost:5000/api/v1/auth/refresh-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("refreshToken").value}});return(0,s.revalidateTag)("auth"),e.json()}catch(e){throw Error(e)}},x=async()=>{try{return(await fetch("http://localhost:5000/api/v1/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value}})).json()}catch(e){throw Error(e)}},v=async e=>{try{return(await fetch(`http://localhost:5000/api/v1/auth/user/${e}/orders`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value}})).json()}catch(e){throw Error(e)}},g=async()=>{try{return(await fetch("http://localhost:5000/api/v1/auth/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:(await o.UL())?.get("accessToken").value}})).json()}catch(e){throw Error(e)}};(0,c.D)([d,i,l,f,u,h,p,m,b,x,v,g]),(0,r.A)(d,"7f0c78e48a1d8921fa412f3f27794f4a9c5de3ff14",null),(0,r.A)(i,"7fa0d3b92d8bfd0c342b1ae9e5fd818d0122ad61a7",null),(0,r.A)(l,"7f65ffcdf859dfce2253a5938ad7f4acbfc972da85",null),(0,r.A)(f,"7f118a3308c5c5219ecec735150b4632c7ca935582",null),(0,r.A)(u,"7f72e2b16b4890bec3e4cbf2569573dce4090abed6",null),(0,r.A)(h,"7fc95ce47dc4f0b9ee2aef64cb82f9b8d994772b4b",null),(0,r.A)(p,"7fa3496c42ebcd9acbe33a0c322e3661f66c7fb353",null),(0,r.A)(m,"7f74df81133e4bd3d3da0d8e00228f71668dfd7bf3",null),(0,r.A)(b,"7f61de4fc9c0646c74472bd5ced2691b7736f4a584",null),(0,r.A)(x,"7f5f38272a1400ced1aed5c216b5155cea5523737b",null),(0,r.A)(v,"7f5d3719d33b3c9ec6ca40f1d45a09cdeeca7862c0",null),(0,r.A)(g,"7f7e04ab504df7796579722d3ffdbd567ec3393a75",null)},52175:(e,t,a)=>{a.d(t,{default:()=>x});var r=a(45512),n=a(58009),s=a(16131),o=a(6868),c=a(81914),d=a(39400),i=a(99926),l=a(77722),f=a(75002),u=a(64590),h=a(91542),p=a(26248);let m=(0,p.createServerReference)("7f65ffcdf859dfce2253a5938ad7f4acbfc972da85",p.callServer,void 0,p.findSourceMapURL,"updateProfile"),b=s.z.object({name:s.z.string().min(2,"Name is required"),email:s.z.string().email("Invalid email address"),phone:s.z.string().optional(),address:s.z.string().optional(),city:s.z.string().optional()});function x({userData:e}){let[t,a]=(0,n.useState)(!1),s=(0,o.mN)({resolver:(0,c.u)(b),defaultValues:{name:e?.name||"",email:e?.email||"",phone:e?.phone||"",address:e?.address||"",city:e?.city||""}});async function p(e){try{let t=await m(e);t.success?(a(!1),h.o.success(t?.message)):h.o.error(t?.message)}catch{h.o.error("Profile update failed. try again")}}return(0,r.jsxs)("div",{className:"container mx-auto px-2 md:px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{children:(0,r.jsx)(u.ZB,{children:"Personal Information"})}),(0,r.jsx)(u.Wu,{children:(0,r.jsx)(i.lV,{...s,children:(0,r.jsxs)("form",{onSubmit:s.handleSubmit(p),className:"space-y-6",children:[(0,r.jsx)(i.zB,{control:s.control,name:"name",render:({field:e})=>(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Full Name"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(l.p,{...e,disabled:!t,placeholder:"Enter Full Name"})}),(0,r.jsx)(i.C5,{})]})}),(0,r.jsx)(i.zB,{control:s.control,name:"email",render:({field:e})=>(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Email"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(l.p,{...e,disabled:!0})}),(0,r.jsx)(i.C5,{})]})}),(0,r.jsx)(i.zB,{control:s.control,name:"phone",render:({field:e})=>(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Phone Number"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(l.p,{...e,disabled:!t,placeholder:"Enter Phone number"})}),(0,r.jsx)(i.C5,{})]})}),(0,r.jsx)(i.zB,{control:s.control,name:"city",render:({field:e})=>(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"City"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(l.p,{...e,disabled:!t,placeholder:"Enter City name"})}),(0,r.jsx)(i.C5,{})]})}),(0,r.jsx)(i.zB,{control:s.control,name:"address",render:({field:e})=>(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Address"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(f.T,{...e,disabled:!t,placeholder:"Enter full address"})}),(0,r.jsx)(i.C5,{})]})}),t?(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(d.$,{type:"submit",className:"cursor-pointer",children:"Save Changes"}),(0,r.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>a(!1),className:"cursor-pointer",children:"Cancel"})]}):(0,r.jsx)(d.$,{type:"button",onClick:()=>a(!0),className:"cursor-pointer",children:"Edit Profile"})]})})})]})]})}},52628:(e,t,a)=>{a.d(t,{Label:()=>o});var r=a(45512);a(58009);var n=a(92405),s=a(44195);function o({className:e,...t}){return(0,r.jsx)(n.b,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},64590:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>i,ZB:()=>c,Zp:()=>s,aR:()=>o,wL:()=>l});var r=a(45512);a(58009);var n=a(44195);function s({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function o({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("flex flex-col gap-1.5 px-6",e),...t})}function c({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function i({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...t})}function l({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6",e),...t})}},75002:(e,t,a)=>{a.d(t,{T:()=>s});var r=a(45512);a(58009);var n=a(44195);function s({className:e,...t}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},94060:(e,t,a)=>{a.r(t),a.d(t,{"7f0c78e48a1d8921fa412f3f27794f4a9c5de3ff14":()=>r.DY,"7f118a3308c5c5219ecec735150b4632c7ca935582":()=>r.hG,"7f5d3719d33b3c9ec6ca40f1d45a09cdeeca7862c0":()=>r.FK,"7f5f38272a1400ced1aed5c216b5155cea5523737b":()=>r.jp,"7f61de4fc9c0646c74472bd5ced2691b7736f4a584":()=>r.qg,"7f65ffcdf859dfce2253a5938ad7f4acbfc972da85":()=>r.r7,"7f72e2b16b4890bec3e4cbf2569573dce4090abed6":()=>r.S0,"7f74df81133e4bd3d3da0d8e00228f71668dfd7bf3":()=>r.ri,"7f7e04ab504df7796579722d3ffdbd567ec3393a75":()=>r.CF,"7fa0d3b92d8bfd0c342b1ae9e5fd818d0122ad61a7":()=>r.Lx,"7fa3496c42ebcd9acbe33a0c322e3661f66c7fb353":()=>r.HW,"7fc95ce47dc4f0b9ee2aef64cb82f9b8d994772b4b":()=>r.yB});var r=a(51040)},99685:(e,t,a)=>{a.d(t,{default:()=>r});let r=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Level 2.0\\\\Assignment\\\\assignment-6\\\\osudpotro\\\\src\\\\components\\\\auth\\\\Profile.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Level 2.0\\Assignment\\assignment-6\\osudpotro\\src\\components\\auth\\Profile.tsx","default")},99926:(e,t,a)=>{a.d(t,{C5:()=>x,MJ:()=>b,eI:()=>p,lR:()=>m,lV:()=>i,zB:()=>f});var r=a(45512),n=a(58009),s=a(12705),o=a(6868),c=a(44195),d=a(52628);let i=o.Op,l=n.createContext({}),f=({...e})=>(0,r.jsx)(l.Provider,{value:{name:e.name},children:(0,r.jsx)(o.xI,{...e})}),u=()=>{let e=n.useContext(l),t=n.useContext(h),{getFieldState:a}=(0,o.xW)(),r=(0,o.lN)({name:e.name}),s=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=t;return{id:c,name:e.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`,...s}},h=n.createContext({});function p({className:e,...t}){let a=n.useId();return(0,r.jsx)(h.Provider,{value:{id:a},children:(0,r.jsx)("div",{"data-slot":"form-item",className:(0,c.cn)("grid gap-2",e),...t})})}function m({className:e,...t}){let{error:a,formItemId:n}=u();return(0,r.jsx)(d.Label,{"data-slot":"form-label","data-error":!!a,className:(0,c.cn)("data-[error=true]:text-destructive-foreground",e),htmlFor:n,...t})}function b({...e}){let{error:t,formItemId:a,formDescriptionId:n,formMessageId:o}=u();return(0,r.jsx)(s.DX,{"data-slot":"form-control",id:a,"aria-describedby":t?`${n} ${o}`:`${n}`,"aria-invalid":!!t,...e})}function x({className:e,...t}){let{error:a,formMessageId:n}=u(),s=a?String(a?.message??""):t.children;return s?(0,r.jsx)("p",{"data-slot":"form-message",id:n,className:(0,c.cn)("text-destructive-foreground text-sm",e),...t,children:s}):null}}};